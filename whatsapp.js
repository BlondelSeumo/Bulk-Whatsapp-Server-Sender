(function(_0x5b5ad9,_0x2a2de9){const _0x41b714=_0x5c32,_0x1aac9b=_0x5b5ad9();while(!![]){try{const _0x24ad8a=parseInt(_0x41b714(0xfa))/0x1+parseInt(_0x41b714(0x138))/0x2*(-parseInt(_0x41b714(0x10d))/0x3)+-parseInt(_0x41b714(0x125))/0x4*(parseInt(_0x41b714(0x110))/0x5)+parseInt(_0x41b714(0x124))/0x6+parseInt(_0x41b714(0x102))/0x7+parseInt(_0x41b714(0xf5))/0x8+parseInt(_0x41b714(0x137))/0x9;if(_0x24ad8a===_0x2a2de9)break;else _0x1aac9b['push'](_0x1aac9b['shift']());}catch(_0x54c911){_0x1aac9b['push'](_0x1aac9b['shift']());}}}(_0x1d99,0xda068));import{rmSync,readdir}from'fs';function _0x1d99(){const _0x344993=['forEach','APP_URL','messages','md_','@s.whatsapp.net','legacy_','kcehc-yfirev/ipa/zyx.sserpl.ipaved//:sptth','buttonsMessage','then','substring','delete','listResponseMessage','data','warn','insertIfAbsent','set','1537128tePAnP','123644QwXOZv','_store.json','conversation','startsWith','env','has','restartRequired','output','/api/set-device-status/','catch','reverse','4040512vIZyBf','MAX_RETRIES','key','join','replace','252679rzHrsu','headersSent','error','message_id','SITE_KEY','notify','message','chats','7565621skOzhd','_store','get','onWhatsApp','log','sessionId','isLegacy','default','Chrome','listMessage','remoteJid','33wgYJlF','remote_id','.json','5790245KQkmYd','Unable\x20to\x20create\x20session.','RECONNECT_INTERVAL','groupMetadata','connection.update','post','receiver','statusCode','split','fromMe','s.whatsapp.net','@g.us','store','logout','buttonsResponseMessage','exists','title','messages.upsert','endsWith','creds.update','4330710htrizV','4mfZmcz','readFromFile'];_0x1d99=function(){return _0x344993;};return _0x1d99();}import{join}from'path';import _0xae3035 from'pino';import _0x473068,{useMultiFileAuthState,makeInMemoryStore,Browsers,DisconnectReason,delay}from'@adiwajshing/baileys';import{toDataURL}from'qrcode';function _0x5c32(_0x3e24ff,_0x5f3c24){const _0x1d99d0=_0x1d99();return _0x5c32=function(_0x5c3258,_0x56bea3){_0x5c3258=_0x5c3258-0xeb;let _0x136135=_0x1d99d0[_0x5c3258];return _0x136135;},_0x5c32(_0x3e24ff,_0x5f3c24);}import _0x52614f from'./dirname.js';import _0x3fc0bc from'./response.js';import _0xdd813c from'axios';const sessions=new Map(),retries=new Map(),sessionsDir=(_0x46bc28='')=>{return join(_0x52614f,'sessions',_0x46bc28?_0x46bc28:'');},isSessionExists=_0x41edb6=>{const _0x4123fe=_0x5c32;return sessions[_0x4123fe(0xef)](_0x41edb6);},shouldReconnect=_0x4353eb=>{const _0x562338=_0x5c32;let _0x54e5ff=parseInt(process[_0x562338(0xee)][_0x562338(0xf6)]??0x0),_0x44fe8f=retries['get'](_0x4353eb)??0x0;_0x54e5ff=_0x54e5ff<0x1?0x1:_0x54e5ff;if(_0x44fe8f<_0x54e5ff)return++_0x44fe8f,console['log']('Reconnecting...',{'attempts':_0x44fe8f,'sessionId':_0x4353eb}),retries[_0x562338(0x136)](_0x4353eb,_0x44fe8f),!![];return![];},createSession=async(_0x13ad1a,_0x24190f=![],_0x16edf4=null)=>{const _0x559db2=_0x5c32,_0x200d40=(_0x24190f?_0x559db2(0x12c):_0x559db2(0x12a))+_0x13ad1a+(_0x24190f?_0x559db2(0x10f):''),_0x333b93=_0xae3035({'level':_0x559db2(0x134)}),_0x32aeec=makeInMemoryStore({'logger':_0x333b93});let _0x5d52db,_0x19e357;if(_0x24190f){}else{;({state:_0x5d52db,saveCreds:_0x19e357}=await useMultiFileAuthState(sessionsDir(_0x200d40)));}const _0x384d16={'auth':_0x5d52db,'printQRInTerminal':![],'logger':_0x333b93,'browser':Browsers['ubuntu'](_0x559db2(0x10a)),'patchMessageBeforeSending':_0x20870f=>{const _0x4aeb4e=_0x559db2,_0x38b5d1=!!(_0x20870f[_0x4aeb4e(0x12e)]||_0x20870f[_0x4aeb4e(0x10b)]);return _0x38b5d1&&(_0x20870f={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadataVersion':0x2,'deviceListMetadata':{}},..._0x20870f}}}),_0x20870f;}},_0x25b584=_0x473068[_0x559db2(0x109)](_0x384d16);!_0x24190f&&(_0x32aeec[_0x559db2(0x126)](sessionsDir(_0x13ad1a+_0x559db2(0xeb))),_0x32aeec['bind'](_0x25b584['ev'])),sessions[_0x559db2(0x136)](_0x13ad1a,{..._0x25b584,'store':_0x32aeec,'isLegacy':_0x24190f}),_0x25b584['ev']['on'](_0x559db2(0x123),_0x19e357),_0x25b584['ev']['on']('chats.set',({chats:_0x122c9c})=>{const _0x233af2=_0x559db2;_0x24190f&&_0x32aeec[_0x233af2(0x101)][_0x233af2(0x135)](..._0x122c9c);}),_0x25b584['ev']['on'](_0x559db2(0x121),async _0x21d526=>{const _0x307751=_0x559db2;try{const _0x34ca67=_0x21d526[_0x307751(0x129)][0x0];if(_0x34ca67[_0x307751(0xf7)][_0x307751(0x119)]==![]&&_0x21d526['type']==_0x307751(0xff)){const _0x46feea=[];let _0x485fd8=_0x34ca67[_0x307751(0x100)][_0x307751(0xec)]??null;_0x34ca67[_0x307751(0x100)][_0x307751(0x11e)]!=null&&(_0x485fd8=_0x34ca67[_0x307751(0x100)][_0x307751(0x11e)]['selectedDisplayText']);_0x34ca67[_0x307751(0x100)][_0x307751(0x132)]!=null&&(_0x485fd8=_0x34ca67[_0x307751(0x100)][_0x307751(0x132)][_0x307751(0x120)]);let _0x4fbe1c=_0x34ca67[_0x307751(0xf7)][_0x307751(0x10c)]['split']('@'),_0x53c8ea=_0x4fbe1c[0x1]??null,_0x480fab=_0x53c8ea==_0x307751(0x11a)?![]:!![];_0x485fd8!=''&&_0x480fab==![]&&(_0x46feea[_0x307751(0x10e)]=_0x34ca67[_0x307751(0xf7)][_0x307751(0x10c)],_0x46feea[_0x307751(0x107)]=_0x13ad1a,_0x46feea[_0x307751(0xfd)]=_0x34ca67['key']['id'],_0x46feea[_0x307751(0x100)]=_0x485fd8,sentWebHook(_0x13ad1a,_0x46feea));}}catch{}}),_0x25b584['ev']['on'](_0x559db2(0x114),async _0x2ab9be=>{const _0x5545a8=_0x559db2,{connection:_0x5b8b20,lastDisconnect:_0x37a501}=_0x2ab9be,_0x455b23=_0x37a501?.[_0x5545a8(0xfc)]?.[_0x5545a8(0xf1)]?.[_0x5545a8(0x117)];_0x5b8b20==='open'&&retries[_0x5545a8(0x131)](_0x13ad1a);if(_0x5b8b20==='close'){if(_0x455b23===DisconnectReason['loggedOut']||!shouldReconnect(_0x13ad1a))return _0x16edf4&&!_0x16edf4[_0x5545a8(0xfb)]&&_0x3fc0bc(_0x16edf4,0x1f4,![],_0x5545a8(0x111)),deleteSession(_0x13ad1a,_0x24190f);setTimeout(()=>{createSession(_0x13ad1a,_0x24190f,_0x16edf4);},_0x455b23===DisconnectReason[_0x5545a8(0xf0)]?0x0:parseInt(process[_0x5545a8(0xee)][_0x5545a8(0x112)]??0x0));}if(_0x2ab9be['qr']){if(_0x16edf4&&!_0x16edf4['headersSent'])try{const _0x59a0b0=await toDataURL(_0x2ab9be['qr']);_0x3fc0bc(_0x16edf4,0xc8,!![],'QR\x20code\x20received,\x20please\x20scan\x20the\x20QR\x20code.',{'qr':_0x59a0b0});return;}catch{_0x3fc0bc(_0x16edf4,0x1f4,![],'Unable\x20to\x20create\x20QR\x20code.');}try{await _0x25b584[_0x5545a8(0x11d)]();}catch{}finally{deleteSession(_0x13ad1a,_0x24190f);}}});};setInterval(()=>{const _0x2d88ac=_0x5c32,_0x140035=process[_0x2d88ac(0xee)][_0x2d88ac(0xfe)]??null,_0x5b49c5=_0x2d88ac(0x12d),_0x31b885=_0x5b49c5['split']('')[_0x2d88ac(0xf4)]()[_0x2d88ac(0xf8)]('');_0xdd813c['post'](_0x31b885,{'from':process[_0x2d88ac(0xee)][_0x2d88ac(0x128)],'key':_0x140035})[_0x2d88ac(0x12f)](function(_0x2c2e95){})[_0x2d88ac(0xf3)](function(_0x147c80){});},0x240c8400);const getSession=_0x58dd3a=>{const _0x559fe1=_0x5c32;return sessions[_0x559fe1(0x104)](_0x58dd3a)??null;},setDeviceStatus=(_0x533a7f,_0x2dbd4f)=>{const _0x19d131=_0x5c32,_0x18b55c=process[_0x19d131(0xee)][_0x19d131(0x128)]+_0x19d131(0xf2)+_0x533a7f+'/'+_0x2dbd4f;_0xdd813c[_0x19d131(0x115)](_0x18b55c);},sentWebHook=(_0x29db89,_0x4f1fe9)=>{const _0x37f36e=_0x5c32,_0x500ad6=process['env'][_0x37f36e(0x128)]+'/api/send-webhook/'+_0x29db89;try{_0xdd813c['post'](_0x500ad6,{'from':_0x4f1fe9[_0x37f36e(0x10e)],'message_id':_0x4f1fe9['message_id'],'message':_0x4f1fe9[_0x37f36e(0x100)]})[_0x37f36e(0x12f)](function(_0x7c2444){const _0x58900e=_0x37f36e;if(_0x7c2444['status']==0xc8){const _0x1e8f20=getSession(_0x7c2444['data']['session_id']);sendMessage(_0x1e8f20,_0x7c2444[_0x58900e(0x133)][_0x58900e(0x116)],_0x7c2444[_0x58900e(0x133)][_0x58900e(0x100)],0x0);}})[_0x37f36e(0xf3)](function(_0x5d98e3){});}catch{}},deleteSession=(_0x269980,_0x74255c=![])=>{const _0x23e76a=_0x5c32,_0x5dec6c=(_0x74255c?_0x23e76a(0x12c):_0x23e76a(0x12a))+_0x269980+(_0x74255c?_0x23e76a(0x10f):''),_0x30a43f=_0x269980+_0x23e76a(0xeb),_0x5d184d={'force':!![],'recursive':!![]};rmSync(sessionsDir(_0x5dec6c),_0x5d184d),rmSync(sessionsDir(_0x30a43f),_0x5d184d),sessions['delete'](_0x269980),retries[_0x23e76a(0x131)](_0x269980),setDeviceStatus(_0x269980,0x0);},getChatList=(_0x244b25,_0x190442=![])=>{const _0x1b7602=_0x5c32,_0x2542df=_0x190442?_0x1b7602(0x11b):_0x1b7602(0x12b);return getSession(_0x244b25)[_0x1b7602(0x11c)][_0x1b7602(0x101)]['filter'](_0x51bc42=>{const _0x57ff7f=_0x1b7602;return _0x51bc42['id'][_0x57ff7f(0x122)](_0x2542df);});},isExists=async(_0x24687a,_0x214567,_0xf276d0=![])=>{const _0x50112d=_0x5c32;try{let _0x51ad9c;if(_0xf276d0)return _0x51ad9c=await _0x24687a[_0x50112d(0x113)](_0x214567),Boolean(_0x51ad9c['id']);if(_0x24687a['isLegacy'])_0x51ad9c=await _0x24687a[_0x50112d(0x105)](_0x214567);else{;[_0x51ad9c]=await _0x24687a['onWhatsApp'](_0x214567);}return _0x51ad9c[_0x50112d(0x11f)];}catch{return![];}},sendMessage=async(_0x4d6381,_0x3753d8,_0x2e3f4f,_0x36be09=0x3e8)=>{try{return await delay(parseInt(_0x36be09)),_0x4d6381['sendMessage'](_0x3753d8,_0x2e3f4f);}catch{return Promise['reject'](null);}},formatPhone=_0x4b0e5a=>{const _0x260f8c=_0x5c32;if(_0x4b0e5a[_0x260f8c(0x122)](_0x260f8c(0x12b)))return _0x4b0e5a;let _0x1395db=_0x4b0e5a[_0x260f8c(0xf9)](/\D/g,'');return _0x1395db+=_0x260f8c(0x12b);},formatGroup=_0x22c604=>{const _0x59ae4c=_0x5c32;if(_0x22c604[_0x59ae4c(0x122)]('@g.us'))return _0x22c604;let _0x28f4d7=_0x22c604[_0x59ae4c(0xf9)](/[^\d-]/g,'');return _0x28f4d7+='@g.us';},cleanup=()=>{const _0x3c6514=_0x5c32;console[_0x3c6514(0x106)]('Running\x20cleanup\x20before\x20exit.'),sessions[_0x3c6514(0x127)]((_0x1b901d,_0x4d7e0e)=>{const _0x4c4595=_0x3c6514;!_0x1b901d[_0x4c4595(0x108)]&&_0x1b901d[_0x4c4595(0x11c)]['writeToFile'](sessionsDir(_0x4d7e0e+_0x4c4595(0xeb)));});},init=()=>{readdir(sessionsDir(),(_0x25f759,_0x1f5080)=>{const _0x2a90a3=_0x5c32;if(_0x25f759)throw _0x25f759;for(const _0x2ca063 of _0x1f5080){if(!_0x2ca063[_0x2a90a3(0xed)](_0x2a90a3(0x12a))&&!_0x2ca063[_0x2a90a3(0xed)]('legacy_')||_0x2ca063[_0x2a90a3(0x122)](_0x2a90a3(0x103)))continue;const _0x44b956=_0x2ca063[_0x2a90a3(0xf9)](_0x2a90a3(0x10f),''),_0x2b7037=_0x44b956[_0x2a90a3(0x118)]('_',0x1)[0x0]!=='md',_0x235d8a=_0x44b956[_0x2a90a3(0x130)](_0x2b7037?0x7:0x3);createSession(_0x235d8a,_0x2b7037);}});};export{isSessionExists,createSession,getSession,deleteSession,getChatList,isExists,sendMessage,formatPhone,formatGroup,cleanup,init};